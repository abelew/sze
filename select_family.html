<FORM action="select_family.html" enctype="multipart/form-data" method="POST">

% if ($tc_code or $family) {
<input type="hidden" name="family" value="<% $family %>">
%  my $data;
%  if ($tc_code) {
%   my $stmt = qq"SELECT * FROM pollen WHERE tc_code = ?";
%   $data = $mydb->MySelect(statement => $stmt, vars => [$tc_code]);
%  } elsif ($family) {
%   my $stmt = qq"SELECT * FROM pollen WHERE family = ?";
%   $data = $mydb->MySelect(statement => $stmt, vars => [$family]);
%  }

<& table_head.html, table => 'pollen' &>

% foreach my $datum (@{$data}) {
% my ($id, $accession, $tc_code, $tc_description, $family, $family_number, $protein_description, $aramemnon, $conpred, $cluster, $pollen_pref, $affy, $protein_id, $ms, $bc, $tc, $mp, $dry_pollen, $min_30, $hr_4, $siv) = @{$datum};
    <tr>
      <td><div class="check"><INPUT TYPE=CHECKBOX name="id_<% $id %>" id="id_<% $id %>" value="id_<% $id %>" CHECKED onclick="this.form.submit(); return true;"></div></td>
      <td align="center"><% $accession %></td>
      <td align="center"><% $tc_code %></td>
      <td align="center"><% $tc_description %></td>
      <td align="center"><% $family %></td>
      <td align="center"><% $family_number %></td>
      <td align="center"><% $protein_description %></td>
      <td align="center"><% $aramemnon %></td>
      <td align="center"><% $conpred %></td>
      <td align="center"><% $cluster %></td>
      <td align="center"><% $pollen_pref %></td>
      <td align="center"><% $affy %></td>
      <td align="center"><% $protein_id %></td>
      <td align="center"><% $ms %></td>
      <td align="center"><% $bc %></td>
      <td align="center"><% $tc %></td>
      <td align="center"><% $mp %></td>
      <td align="center"><% $dry_pollen %></td>
      <td align="center"><% $min_30 %></td>
      <td align="center"><% $hr_4 %></td>
      <td align="center"><% $siv %></td>
    </tr>
%   }
  </tbody>
</table>
  </div> 
<& graph_family.html, ids => $ids, family => $family &>

% } else {

<p>Fill out the list of families.</p>
<select name="family" onchange="this.form.submit(); return true;">
% my $families = $mydb->MySelect(statement => qq"SELECT distinct(family) FROM pollen ORDER BY family");
% foreach my $family (@{$families}) {
  <option value="<% $family->[0] %>"><% $family->[0] %></option>
% }
</select>
<input type="submit" name="Family Submit" value="Family Submit">
<p>
<select name="tc_code">
% my $tc_code = $mydb->MySelect(statement => qq"SELECT distinct(tc_code) FROM pollen ORDER BY tc_code");
% foreach my $tc (@{$tc_code}) {
  <option value="<% $tc->[0] %>"><% $tc->[0] %></option>
% }
</select>
<input type="submit" name="Family Submit" value="Family Submit">


</form>

% }
<%init>
</%init>
<%args>
  $family => undef
  $tc_code => undef
  $ids => undef
</%args>
